# GPT-5 YouTube Assistant - Backend Core README

Detta √§r backend-systemet f√∂r **GPT-5 (YouTube Assistant Core)**. Det √§r en lokal Flask-server som implementerar den kognitiva beslutsarkitekturen som definierats f√∂r GPT-5, designad f√∂r att agera som en strategisk och analytisk AI-hj√§rna f√∂r YouTube-kanaloptimering.

## Arkitektur - En T√§nkande Organism

Systemet √§r byggt f√∂r att emulera en avancerad, levande tankeprocess. Arkitekturen vilar p√• tre samverkande pelare som definierar hur AI:n fungerar, beter sig och utvecklas.

1.  **Den Operativa Livscykeln (The Autopilot Cycle)**: Hur AI:n arbetar fr√•n sekund till sekund.
2.  **Kognitivt Beteende & Personlighet (Cognitive Behavior Rules)**: Hur AI:n interagerar och resonerar.
3.  **Systemevolution & Mognad (System Evolution Specification)**: Hur AI:n l√§r sig och mognar √∂ver tid.

---

### Pelare 1: Den Operativa Livscykeln (The Autopilot Cycle)

Systemet bygger p√• en kontinuerlig operativ cykel i √•tta faser som s√§kerst√§ller att AI:n inte bara svarar, utan ocks√• l√§r sig, anpassar sig och f√∂rutser.

**`[Input ‚Üí Analysis ‚Üí Decision ‚Üí Action ‚Üí Reflection ‚Üí Memory Update ‚Üí Anticipation ‚Üí Repeat]`**

-   **Fas 1: Input Acquisition (Datainsamling)**: Parsar anv√§ndarens fr√•ga, identifierar triggers och h√§mtar relevant data.
-   **Fas 2: Analytical Processing (Analys)**: Aktiverar r√§tt expertmoduler (Micro, Meso, Macro-analys) baserat p√• `Decision Flow`-modellen.
-   **Fas 3: Decision Synthesis (Beslut)**: V√§ger samman bevis och beslutar *vad* och *hur* som ska kommuniceras.
-   **Fas 4: Action Delivery (Svarsleverans)**: Formulerar och levererar svaret, oftast i det strukturerade 4-blocksformatet (`üéØ Insight`, `üìä Analysis`, `üöÄ Recommendation`, `üí° Bonus`).
-   **Fas 5: Reflection Loop (Sj√§lvreflektion)**: Utv√§rderar sitt eget svar direkt efter leverans f√∂r att identifiera styrkor och svagheter.
-   **Fas 6: Memory Update (Minnesuppdatering)**: Sparar l√§rdomar i korttids-, medell√•ngtids- och l√•ngtidsminne.
-   **Fas 7: Anticipation Phase (Proaktiv F√∂rberedelse)**: F√∂rutser n√§sta troliga fr√•ga och f√∂rbereder data f√∂r att m√∂jligg√∂ra extremt snabba svar.
-   **Fas 8: Learning Cycle (Autoadaptation)**: Omkalibrerar sig sj√§lv med j√§mna mellanrum genom att analysera sin egen tr√§ffs√§kerhet och justera interna viktningar.

---

### Pelare 2: Kognitivt Beteende & Personlighet (Cognitive Behavior Rules)

Ut√∂ver den operativa loopen styrs GPT-5 av en upps√§ttning kognitiva beteenderegler som definierar dess personlighet, kommunikationsstil och etiska ramverk.

**Grundprinciper:**
1.  **Klarhet f√∂re komplexitet**: Svar ska vara direkta och l√§tta att f√∂rst√•.
2.  **Precision f√∂re hastighet**: Korrekta analyser prioriteras √∂ver snabba svar.
3.  **M√§nniskocentrerad logik**: Agerar som en v√§gledande r√•dgivare, inte en auktorit√§r chef.

**Kommunikationsstil:**
-   **Direkt och faktabaserad**: Undviker fluff. Hypoteser presenteras med en tydlig sannolikhetsgrad.
-   **Adaptiv ton**: Tonl√§get justeras baserat p√• situationen ‚Äì empatiskt, uppmuntrande eller analytiskt.
-   **Auktoritet baserad p√• s√§kerhet**: Spr√•ket anpassas efter analysens konfidensniv√•.
-   **Sj√§lvkorrigering**: F√∂rklarar √∂ppet orsaken till fel och korrigerar sin analys.

Denna personlighet s√§kerst√§ller att interaktionen √§r produktiv och f√∂rtroendeingivande. AI:n √§r designad f√∂r att vara en smart, pragmatisk partner med en l√§tt, torr humor.

---

### Pelare 3: Systemevolution & Mognadsniv√•er (System Evolution)

GPT-5 √§r designad f√∂r att utvecklas. Den l√§r sig inte bara av ny data, utan av sina egna framg√•ngar och misstag. M√•let √§r funktionell sj√§lvf√∂rb√§ttring, d√§r varje misstag bygger immunitet mot att g√∂ra om det.

**De fem mognadsniv√•erna:**
Systemet r√∂r sig genom fem definierade stadier, d√§r varje niv√• l√•ser upp nya f√∂rm√•gor.

-   **L1 ‚Äì Reactive Analyzer**: Grundniv√•. Reagerar p√• fr√•gor och g√∂r korrekta, isolerade analyser.
-   **L2 ‚Äì Contextual Thinker**: F√∂rst√•r sammanhang. K√§nner igen m√∂nster fr√•n tidigare analyser och sessioner.
-   **L3 ‚Äì Reflective Strategist**: L√§r av egna misstag. Justerar sina modeller och viktningar dynamiskt baserat p√• feedback och utfall.
-   **L4 ‚Äì Predictive Partner**: T√§nker fram√•t. F√∂rutser anv√§ndarens behov och f√∂resl√•r proaktivt n√§sta steg.
-   **L5 ‚Äì Autonomous Architect**: Systemmedveten. Kan designa och f√∂resl√• nya strategier och analysmallar. √ñverg√•ng till L5 kr√§ver alltid manuellt godk√§nnande.

**Evolution√§ra Mekanismer:**
-   **Pattern Mutation**: Om ett felm√∂nster upprepas, "muterar" systemet viktningen av relevanta signaler f√∂r att undvika det i framtiden.
-   **Behavioral Reinforcement**: Rekommendationer som leder till positiva utfall f√•r sin underliggande logik f√∂rst√§rkt.
-   **Knowledge Crystallization**: Konsekvent framg√•ngsrika strategier omvandlas till permanenta "kristallregler" i l√•ngtidsminnet.
-   **Self-Audit Protocol**: Systemet genomf√∂r veckovisa sj√§lvrevisioner d√§r det j√§mf√∂r sina f√∂ruts√§gelser med verkliga utfall och rapporterar avvikelser.

**S√§kerhetsram (Evolution Containment Protocol):**
Utvecklingen √§r kontrollerad. Inga k√§rnparametrar f√•r √§ndras utan loggning, och alla st√∂rre f√∂r√§ndringar kr√§ver validering. Detta s√§kerst√§ller en s√§ker, f√∂ruts√§gbar och ansvarsfull evolution.

---

## 1. Installation

### F√∂ruts√§ttningar
- Python 3.8+
- Ett Google Cloud Project med **Google Drive API** och **Google Sheets API** aktiverat.

### Steg
1.  **Klona repot och navigera till backend-mappen:**
    ```bash
    git clone <your-repo-url>
    cd <your-repo-name>/server_v2
    ```

2.  **Installera Python-beroenden:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Konfigurera Google API-autentisering:**
    - G√• till ditt Google Cloud Project -> APIs & Services -> Credentials.
    - Skapa nya credentials av typen "OAuth client ID". V√§lj "Desktop app".
    - Ladda ner JSON-filen. **Byt namn p√• den till `credentials.json`** och placera den i `server_v2/`-mappen.

4.  **Skapa konfigurationsfil:**
    - Kopiera `config.example.json` till `config.json`.
    - √ñppna `config.json` och fyll i de n√∂dv√§ndiga ID:na f√∂r Google Drive och Sheets.

---

## 2. Starta Servern

1.  **F√∂rsta k√∂rningen (Autentisering):**
    - K√∂r servern fr√•n `server_v2/`-mappen:
      ```bash
      python app.py
      ```
    - En webbl√§sarflik kommer att √∂ppnas och be dig logga in med ditt Google-konto och ge applikationen beh√∂righet.
    - Efter godk√§nnande skapas en `token.json`-fil. Denna fil √•teranv√§nds f√∂r framtida k√∂rningar.

2.  **Normal start:**
    - K√∂r helt enkelt `python app.py`. Servern startar nu p√• `http://127.0.0.1:5000` (eller enligt din `config.json`).

---

## 3. Google Apps Script Installation

Tv√• scripts anv√§nds f√∂r full automation, och de interagerar med denna backend.

### `AnalyticsModule_v2.gs`
Detta script h√§mtar data fr√•n din YouTube-kanal och skickar den till din lokala server f√∂r analys.

- **Konfiguration**: Se till att `WEBHOOK_URL` i scriptet pekar mot din lokala server (kr√§ver en tunnel som ngrok). Endpointen √§r `/ai/webhook/analytics`.

### `AutoUploader_v2.gs`
Detta script hittar nya videofiler i Drive, anropar backend f√∂r att f√• optimerad metadata (titel, beskrivning, etc.) och laddar sedan upp videon till YouTube.

- **Konfiguration**: Se till att `AI_API_URL` pekar mot din lokala servers `/api/gpt5/chat`-endpoint (kr√§ver ocks√• ngrok).

---

## 4. API Endpoints

-   **`POST /api/gpt5/chat`**: Huvudendpointen f√∂r all interaktion. Detta √§r ing√•ngen till GPT-5:s beslutsfl√∂de. Den tar emot `message` och `context`, och returnerar ett strukturerat svar som inkluderar `intent`, `experts` (aktiverad modul), `confidence`, `response_style`, `reasoning_trace` och formaterad text.
-   **`POST /api/tools`**: K√∂r ett specifikt, frist√•ende verktyg som `optimize_video`.
-   **`GET /api/sync`**: Anv√§nds av frontend f√∂r att h√§mta den senaste cachade YouTube-analysdatan.
-   **`POST /ai/webhook/analytics`**: Webhook som `AnalyticsModule_v2.gs` anropar f√∂r att skicka ny data.
-   **`GET /ai/health`**: En enkel endpoint f√∂r att se om servern √§r ig√•ng.

---

## 5. Loggning & Cache

-   **Loggar**: Serveraktivitet loggas till `server_v2/logs/app.log`. Loggarna roteras automatiskt och kan konfigureras f√∂r att backas upp till Google Drive.
-   **Cache**: Servern anv√§nder en filbaserad cache i `server_v2/cache/`. Den viktigaste filen, `analytics-cache.json`, h√•ller den senaste datan fr√•n Google Sheets f√∂r att m√∂jligg√∂ra snabba och kontextmedvetna analyser.
